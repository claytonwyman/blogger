(function(t){function e(e){for(var a,i,l=e[0],n=e[1],c=e[2],g=0,d=[];g<l.length;g++)i=l[g],o[i]&&d.push(o[i][0]),o[i]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,l=1;l<s.length;l++){var n=s[l];0!==o[n]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},o={app:0},r=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=n;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("64a9"),o=s.n(a);o.a},"1a63":function(t,e,s){"use strict";var a=s("85db"),o=s.n(a);o.a},2044:function(t,e,s){},"3cb6":function(t,e,s){t.exports=s.p+"img/blogger-logo.99e135dd.png"},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("navigation"),s("div",{staticClass:"container-fluid"},[s("router-view")],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navigation w-100 mb-4"},[a("div",{staticClass:"col d-flex justify-content-between align-items-center"},[a("div",{staticClass:"action muted m-1",on:{click:function(e){return t.$router.push({name:"home"})}}},[a("img",{attrs:{src:s("3cb6"),alt:"logo",height:"100"}})]),t.title?a("h1",{staticClass:"action nav-title",attrs:{"data-toggle":"toggle","data-placement":"top",title:"Back to Home"}},[t._v("Blogger")]):t._e()])])},l=[],n=s("3d20"),c=s.n(n),u={name:"navigation",data(){return{open:!1,links:[{name:"Home",routeName:"home",class:""},{name:"Playlists",routeName:"playlists",class:""},{name:"Documentation",routeName:"documentation",class:" order-1"}]}},computed:{title(){return this.$route.name},baseURL(){return this.$store.state.baseURL||"//localhost:3000/api"}},methods:{setBaseURL(){c.a.fire({title:"Change your server address?",text:"Note: The url will be formatted for you. Just provide the port number.",input:"number",inputAutoTrim:!0,showCancelButton:!0,inputPlaceholder:"e.g., 3000",preConfirm:t=>{t&&(this.$store.dispatch("setBaseURL",t),setTimeout(()=>this.$store.dispatch("cstmAlrt",{method:"toast",title:"Port Updated"}),100))}})}},components:{}},g=u,d=(s("9028"),s("2877")),f=Object(d["a"])(g,i,l,!1,null,null,null),m=f.exports,p={name:"App",components:{Navigation:m}},b=p,h=(s("034f"),Object(d["a"])(b,o,r,!1,null,null,null)),_=h.exports,v=s("8c4f"),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home row justify-content-center"},[s("div",{staticClass:"col-11"},[s("form",[s("div",{staticClass:"d-flex align-items-center"},[t.query.length?s("i",{staticClass:"action muted fa fa-fw fa-times",on:{click:function(e){t.query=""}}}):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"__query w-100",attrs:{autofocus:"",placeholder:"search...",required:"",name:"query",type:"text"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})])]),t.results.length?s("div",{staticClass:"row"},t._l(t.results,function(e){return s("blog-card",{key:e._id,attrs:{blog:e},on:{setQuery:t.setQuery}})}),1):t._e()]),s("div",{staticClass:"__fab"},[s("input",{staticClass:"__fab_toggle",attrs:{type:"checkbox",name:"__fab_toggle"}}),t._m(0),s("div",{staticClass:"__fab_buttons"},[s("a",{staticClass:"text-white action d-flex align-items-center justify-content-center",attrs:{title:"Add Blog"},on:{click:t.createBlog}},[s("i",{staticClass:"fa fa-plus-circle"})]),s("a",{staticClass:"text-white action d-flex align-items-center justify-content-center",attrs:{title:"Run Tests"},on:{click:t.runTests}},[s("i",{staticClass:"fa fa-clipboard"})])])])])},C=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"__fab_button action"},[s("i",{staticClass:"fa fa-cog"})])}],w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"blog-container",style:{width:t.full?"90%":"50rem"}},[a("div",{staticClass:"blog-header"},[a("div",{staticClass:"blog-cover",style:{"background-image":"url("+t.blog.img+")"}},[a("div",{staticClass:"blog-author"},[a("h3",[t._v(t._s(t.blog.author))])])])]),a("div",{staticClass:"blog-body",style:{width:t.full?"95%":"80%"}},[a("div",{staticClass:"blog-title mt-1"},[a("h1",[a("router-link",{attrs:{to:{name:"blog",params:{slug:t.blog.slug||t.blog._id}}}},[t._v(t._s(t.blog.title))])],1),t.full?a("hr"):t._e()]),a("div",{staticClass:"blog-summary"},[a("p",[t._v(t._s(t.blog.summary))]),t.full?a("p",{domProps:{innerHTML:t._s(t.blog.body)}}):t._e()]),a("div",{staticClass:"blog-tags"},[a("ul",t._l(t.blog.tags,function(e){return a("li",{key:e},[a("a",{staticClass:"action",on:{click:function(s){return t.$emit("setQuery",e)}}},[t._v(t._s(e))])])}),0)])]),a("div",{staticClass:"blog-footer",style:{width:t.full?"95%":"80%"}},[a("ul",[t.blog.updatedAt?a("li",{staticClass:"published-date"},[t._v(t._s(t._f("timeago")(t.blog.updatedAt)))]):t._e(),t.full?a("li",{staticClass:"published-date"},[a("img",{attrs:{src:s("3cb6"),height:"25"}}),a("span",{staticClass:"ml-1"},[t._v(t._s(t.blog.author))])]):t._e()])])])},B=[],x={name:"BlogCard",props:{blog:{type:Object,required:!0},full:{type:Boolean}},filters:{timeago(t){try{let s=new Date(t);return`${s.toLocaleString()}`}catch(e){return""}}}},T=x,$=(s("1a63"),Object(d["a"])(T,w,B,!1,null,null,null)),E=$.exports,k={name:"home",data(){return{query:""}},mounted(){this.$store.dispatch("getBlogs")},computed:{blogs(){return this.$store.state.blogs},results(){if(!this.query.length)return this.blogs;let t=new RegExp(this.query,"ig");return this.blogs.filter(e=>{return!!t.test(e.title)||e.tags.includes(this.query)})}},methods:{setQuery(t){this.query=t},createBlog(){this.$store.dispatch("createBlog")},setBaseUrl(){this.$store.dispatch("setBaseURL")},runTests(){this.$store.dispatch("runTests")}},components:{Navigation:m,BlogCard:E}},A=k,j=(s("cccb"),Object(d["a"])(A,y,C,!1,null,null,null)),S=j.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"documentation row"},[t._v("\n    doc here\n")])},P=[],U={},O=Object(d["a"])(U,q,P,!1,null,null,null),L=O.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.blog._id?s("div",[t.editing?t._e():s("blog-card",{attrs:{blog:t.blog,full:!0}}),t.editing?s("div",{staticClass:"card p-3"},[s("form",{on:{submit:t.save}},[s("div",{staticClass:"form-group d-flex align-items-center"},[s("input",{attrs:{type:"file"},on:{change:function(e){return t.addImage()}}}),s("br"),s("img",{attrs:{src:t.blog.img,height:"200",alt:"Image preview..."}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"slug"}},[t._v("Slug:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.slug,expression:"slug"}],staticClass:"disabled muted form-control",attrs:{readonly:""},domProps:{value:t.slug},on:{input:function(e){e.target.composing||(t.slug=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Title:")]),s("div",{staticClass:"d-flex align-items-center"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.blog.title,expression:"blog.title",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"title",maxlength:"60"},domProps:{value:t.blog.title},on:{input:function(e){e.target.composing||t.$set(t.blog,"title",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("small",{staticClass:"ml-1"},[t.blog.title?s("small",[t._v(t._s(t.blog.title.length)+"/60")]):t._e()])])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Summary:")]),s("div",{staticClass:"d-flex align-items-center"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.blog.summary,expression:"blog.summary",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"title",maxlength:"120"},domProps:{value:t.blog.summary},on:{input:function(e){e.target.composing||t.$set(t.blog,"summary",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("small",{staticClass:"ml-1"},[t.blog.summary?s("small",[t._v(t._s(t.blog.summary.length)+"/120")]):t._e()])])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"body"}}),s("div",{staticClass:"outline",attrs:{contenteditable:"true"},domProps:{innerHTML:t._s(t.blog.body)},on:{blur:t.setBody}})]),s("div",{staticClass:"form-group"},[s("div",{staticClass:"blog-tags"},[s("ul",[t._l(t.blog.tags,function(e,a){return s("li",{key:e},[s("a",{staticClass:"action",on:{click:function(e){return t.removeTag(a)}}},[t._v(t._s(e))])])}),s("li",[s("a",{staticClass:"action",on:{click:t.addTag}},[s("i",{staticClass:"fa fa-fw fa-plus"})])])],2)])])])]):t._e(),s("div",{staticClass:"__fab"},[s("input",{staticClass:"__fab_toggle",attrs:{type:"checkbox",name:"__fab_toggle"}}),t._m(0),s("div",{staticClass:"__fab_buttons"},[t.editing?t._e():s("a",{staticClass:"text-white action d-flex align-items-center justify-content-center",attrs:{title:"Edit"},on:{click:function(e){t.editing=!0}}},[s("i",{staticClass:"fa fa-pen"})]),t.editing?s("a",{staticClass:"text-white action d-flex align-items-center justify-content-center bg-success",attrs:{title:"Set Port"},on:{click:t.save}},[s("i",{staticClass:"fa fa-upload"})]):t._e(),s("a",{staticClass:"text-white action d-flex align-items-center justify-content-center bg-danger",attrs:{title:"Set Port"},on:{click:t.deleteBlog}},[s("i",{staticClass:"fa fa-trash"})])])])],1):s("div",[t._v("LOADING.....")])},R=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"__fab_button action"},[s("i",{staticClass:"fa fa-cog"})])}],I=s("b747"),M=s.n(I),D={name:"Blog",data(){return{editing:!1}},mounted(){this.$store.dispatch("getBlog",this.$route.params.slug)},computed:{blog(){return this.$store.state.blog},slug(){return M()(this.blog.title,{lower:!0})}},methods:{addImage(){event.target.files;var t=event.target.files[0],e=new FileReader;e.addEventListener("load",t=>{this.blog.img=e.result},!1),t&&e.readAsDataURL(t)},setBody(){this.blog.body=event.target.innerHTML},save(){this.blog.slug=this.slug,this.$store.dispatch("saveBlog",this.blog),this.editing=!1},deleteBlog(){c.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.value&&(this.$store.dispatch("deleteBlog",this.blog._id),c.a.fire("Deleted!","Your file has been deleted.","success"),this.$router.push({name:"home"}))})},removeTag(t){this.blog.tags.splice(t,1)},addTag(){c.a.fire({title:"Add Tag",input:"text",inputAutoTrim:!0,showCancelButton:!0,inputPlaceholder:"tag",preConfirm:t=>{if(!t)return;let e=this.blog.tags.find(e=>e==t);e||this.blog.tags.push(t)}})}},components:{BlogCard:E}},F=D,H=(s("9d5a"),Object(d["a"])(F,N,R,!1,null,null,null)),J=H.exports;a["a"].use(v["a"]);var G=new v["a"]({routes:[{path:"/",name:"home",component:S},{path:"/documentation",name:"documentation",component:L},{path:"/article/:slug",name:"blog",component:J}]}),Q=s("2f62"),Y=s("bc3a"),W=s.n(Y);function z({title:t,text:e="",type:s="success",timer:a=5500}){return c.a.fire({title:t,text:e,type:s,timer:a,showConfirmButton:!1,position:"top-right",toast:!0})}function K(t){if(!t)return z({title:"An uknown error occured",type:"error"});let e=t.message||"An error occured";if(!t.isAxiosError||!t.response)return z({title:e,type:"error"});let s=t.response.data,a=s.message?s.message:s.error?s.error:t.message;e=`${t.code} ${e}`,z({title:e,text:a,type:"error"})}a["a"].use(Q["a"]);const V="/api";let X=W.a.create({baseURL:V,timeout:5e3});var Z=new Q["a"].Store({state:{blogs:[],blog:{}},mutations:{setBlogs(t,e=[]){t.blogs=e},setBlog(t,e={}){t.blog=e},addBlog(t,e){e&&t.blogs.unshift(e)}},actions:{setBaseURL(){c.a.fire({title:"Change your server address? "+V,text:"Note: The url will be formatted for you. Just provide the port number.",input:"number",inputAutoTrim:!0,showCancelButton:!0,inputPlaceholder:"e.g., 3000",preConfirm:t=>{if(!t)return;let e="//localhost:"+t+"/api";X.defaults.baseURL=e,localStorage.setItem("baseURL",e),setTimeout(()=>z({title:"Port Updated"}),100)}})},async getBlogs({commit:t,state:e}){try{let e=await X.get("blogs/");t("setBlogs",e.data)}catch(s){K(s)}},async createBlog({dispatch:t,commit:e}){c.a.mixin({input:"text",confirmButtonText:"Next &rarr;",showCancelButton:!0,progressSteps:["1","2"]}).queue(["What is your name?","What is your blog title?"]).then(e=>{if(!e.value)throw new Error("Blog Creation Canceled");t("sendBlog",e.value)}).catch(t=>K(t))},async sendBlog({commit:t},e){try{let a={title:e[1],author:e[0],slug:M()(e[1],{lower:!0})},o=await X.post("blogs",a);if(o.data._id)return z({title:"Blog Created"}),t("addBlog",o.data),!0}catch(s){K(s)}},async getBlog({commit:t,state:e},s){try{if(e.blog.slug==s)return;let o=e.blogs.find(t=>t.slug==s);if(o)return t("setBlog",o);let r=await X.get("blogs?slug="+s);if(r.data)return t("setBlog",r.data)}catch(a){console.error(a)}try{let e=await X.get("blogs/"+s);if(e.data&&e.data)throw t("setBlog",e.data),new Error("Had to fetch post by Id instead of slug this is not the intended functionality, Did you forget to create a slug property in your schema")}catch(o){K(o)}},async saveBlog({dispatch:t},e){try{await X.put("blogs/"+e._id,e);z({title:"Blog Updated"}),G.push({name:"blog",params:{slug:e.slug}})}catch(s){K(s)}},async deleteBlog({dispatch:t},e){try{await X.delete("blogs/"+e);z({title:"Blog Removed"}),t("getBlogs")}catch(s){K(s)}},async runTests(){var t={title:"__test__blog",slug:"__test__blog",author:"JIMMY TESTER"};let e;try{z({title:"Testing Blog Creation",type:"info"});let a=await X.post("blogs",t);e=a.data}catch(s){return K(s)}try{z({title:"Testing Blog Edit",type:"info"}),e.body="___THISISATEST___",e.tags=["___TESTTAG___"];await X.put("blogs/"+e._id,e)}catch(s){return K(s)}try{z({title:"Testing Find BlogById",type:"info"});let t=await X.get("blogs/"+e._id);if(!e.body==t.data.body)throw new Error("Blog FoundById but edit failed");e=t.data}catch(s){return K(s)}try{z({title:"Testing Find Blog by Slug",type:"info"});let t=await X.get("blogs?slug=__test__blog");if(!t.data)throw new Error("Unable to find expected test blog by slug __test__blog are you sure your query is correct?")}catch(s){return K(s)}try{z({title:"Testing Find Blogs with Tag",type:"info"});let t=await X.get("blogs?tag=___TESTTAG___");if(!Array.isArray(t.data))throw new Error("Unable to find blogs by tag an array should of returned");if(t.data.length<1)throw new Error("Unable to find expected test blog by tag ___TESTTAG___ are you sure your query is correct?")}catch(s){return K(s)}try{z({title:"Testing Blog Delete",type:"info"}),X.delete("blogs/"+e._id)}catch(s){return K(s)}try{let t=await X.get("blogs/"+e._id);if(t.data)throw new Error("Test Blog should of been deleted so subsequent findById should of returned nothing or failed")}catch(s){if(200==s.status)return K(s)}z({title:"All tests successfully passed Excellent Job!!!",type:"success"})}}}),tt=s("9483");Object(tt["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),new a["a"]({router:G,store:Z,mounted(){},render:function(t){return t(_)}}).$mount("#app")},"64a9":function(t,e,s){},"75ce":function(t,e,s){},"85db":function(t,e,s){},9028:function(t,e,s){"use strict";var a=s("2044"),o=s.n(a);o.a},"9d5a":function(t,e,s){"use strict";var a=s("75ce"),o=s.n(a);o.a},cccb:function(t,e,s){"use strict";var a=s("d563"),o=s.n(a);o.a},d563:function(t,e,s){}});
//# sourceMappingURL=app.b3b2f3c4.js.map